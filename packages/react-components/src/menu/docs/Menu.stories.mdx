import { ArgsTable, Meta, Story } from "@storybook/addon-docs/blocks";
import { ComponentInfo, Preview, Tagline } from "@stories/components";
import { DisclosureArrow } from "@react-components/disclosure";
import { Divider, InnerDivider } from "@react-components/divider";
import { HelpIcon, IconList, LightbulbIcon, NotificationIcon, VerticalDotsIcon } from "@react-components/icons";
import { IconButton } from "@react-components/button";
import { InnerItem, InnerSection, Item, Section } from "@react-components/placeholders";
import { InnerMenu, InnerMenuTrigger, Menu, MenuTrigger } from "@react-components/menu";
import { Text } from "@react-components/text";

<Meta
    title="Components/Menu"
    id="menu"
/>

# Menu

<Tagline>A menu offers a list of choices to the user, such as a set of actions or functions.</Tagline>

<ComponentInfo
    usage={"import { MenuTrigger, Menu, Item, Section, Divider, MenuTriggerContext, useMenuTriggerContext } from \"@orbit-ui/react-components\""}
    ariaPath="#menu"
    githubPath="/packages/react-components/src/menu/src"
/>

## Usage

A menu accepts exactly two children: the element which trigger the opening of the menu and the menu items. A trigger can be any component which accepts a `ref` and any other props passed from menu.

### Default

A default menu.

<Preview>
    <Story name="default">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Item key="launch">Launch...</Item>
                <Item key="eject">Eject...</Item>
                <Item key="land">Land...</Item>
                <Item key="help">Help</Item>
                <Item key="exit">Exit</Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Section

A menu items can be group by sections.

<Preview>
    <Story name="section">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Section title="Actions">
                    <Item key="launch">Launch...</Item>
                    <Item key="eject">Eject...</Item>
                    <Item key="land">Land...</Item>
                </Section>
                <Section title="Others">
                    <Item key="help">Help</Item>
                    <Item key="exit">Exit</Item>
                </Section>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Divider

A menu items can be separated by a divider.

<Preview>
    <Story name="divider">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Item key="launch">Launch...</Item>
                <Item key="eject">Eject...</Item>
                <Item key="land">Land...</Item>
                <Divider />
                <Item key="help">Help</Item>
                <Item key="exit">Exit</Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Icon

A menu item can have [icons](?path=/docs/icon-gallery--page).

<Preview>
    <Story name="icon">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Item key="launch">
                    <NotificationIcon />
                    <Text>Launch...</Text>
                </Item>
                <Item key="eject">
                    <HelpIcon />
                    <Text>Eject...</Text>
                </Item>
                <Item key="land">
                    <LightbulbIcon />
                    <Text>Land...</Text>
                </Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### End icon

A select item can have *non standard* end [icons](?path=/docs/icon-gallery--page) can be provided to handle special cases like displaying a list of icons. However, think twice before adding *end* icons, *start* icons should be your go to.

<Preview>
    <Story name="end icon">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Item key="launch">
                    <Text>Launch...</Text>
                    <IconList slot="end-icon">
                        <NotificationIcon />
                        <HelpIcon />
                        <LightbulbIcon />
                    </IconList>
                </Item>
                <Item key="eject">
                    <Text>Eject...</Text>
                    <HelpIcon slot="end-icon" />
                </Item>
                <Item key="land">
                    <Text>Land...</Text>
                    <IconList slot="end-icon">
                        <NotificationIcon />
                        <HelpIcon />
                        <LightbulbIcon />
                    </IconList>
                </Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Description

A menu item can have a description.

<Preview>
    <Story name="description">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Item key="launch">
                    <Text>Launch...</Text>
                    <Text slot="description">Launch...</Text>
                </Item>
                <Item key="eject">
                    <Text>Eject...</Text>
                    <Text slot="description">Eject...</Text>
                </Item>
                <Item key="land">
                    <Text>Land...</Text>
                    <Text slot="description">Land...</Text>
                </Item>
                <Item key="help">
                    <Text>Help</Text>
                    <Text slot="description">Help</Text>
                </Item>
                <Item key="exit">
                    <Text>Exit</Text>
                    <Text slot="description">Exit</Text>
                </Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Tooltip

A menu item can have a basic tooltip.

<Preview>
    <Story name="tooltip">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Item key="launch">Launch...</Item>
                <Item key="eject">Eject...</Item>
                <Item tooltip="Land on Of Course I Still Love You" key="land">Land...</Item>
                <Item key="help">Help</Item>
                <Item key="exit">Exit</Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Disabled item

A menu item can be disabled.

<Preview>
    <Story name="disabled item">
        <MenuTrigger>
            <IconButton color="secondary" aria-label="View tasks">
                <VerticalDotsIcon />
            </IconButton>
            <Menu>
                <Item disabled key="launch">Launch...</Item>
                <Item key="eject">Eject...</Item>
                <Item disabled key="land">Land...</Item>
                <Item key="help">Help</Item>
                <Item key="exit">Exit</Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Custom trigger

A menu trigger can update is appareance based on the `isOpen` value by using `useMenuTriggerContext`.

Any trigger would work as long as it accepts a `ref` and any other props provided by the menu.

<Preview filePath="/menu/docs/CustomTrigger" noInline />

### Disclosure arrow

You can use a [disclosure arrow](?path=/docs/disclosure-arrow--context) component to hint that activating the button will display additional content.

<Preview>
    <Story name="menu arrow">
        <MenuTrigger>
            <Button>
                <Text>Trigger</Text>
                <DisclosureArrow slot="end-icon" />
            </Button>
            <Menu>
                <Item key="launch">Launch...</Item>
                <Item key="eject">Eject...</Item>
                <Item key="land">Land...</Item>
                <Item key="help">Help</Item>
                <Item key="exit">Exit</Item>
            </Menu>
        </MenuTrigger>
    </Story>
</Preview>

### Controlled

The visibility state can be handled in controlled mode.

<Preview filePath="/menu/docs/ControlledMenu" />

## API

### MenuTrigger

<ComponentInfo
    usage={"import { MenuTrigger } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerMenuTrigger} />

### Menu

<ComponentInfo
    usage={"import { Menu } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerMenu} />

### Item

<ComponentInfo
    usage={"import { Item } from \"@orbit-ui/react-components\""}
    slots={["icon", "text", "description", "end-icon"]}
    compact
/>

<ArgsTable of={InnerItem} />

### Section

<ComponentInfo
    usage={"import { Section } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerSection} />

### Divider

<ComponentInfo
    usage={"import { Divider } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerDivider} />

